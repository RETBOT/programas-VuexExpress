webpackJsonp([1],{"9M+g":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("qb6w"),a("9M+g");var n=a("Tqaz"),r=a("7+uW"),i=a("3EgV"),o=a.n(i),s=a("nUxp"),l=a.n(s),c=a("Xxa5"),u=a.n(c),d=a("exGp"),v=a.n(d),p=a("mtWM"),f=a.n(p),m=(a("SyL9"),new r.default),h={data:function(){return{drawer:null,usuario_actual:null}},props:{source:String},mounted:function(){this.obtenerUsuario(),this.escucharEventos()},methods:{escucharEventos:function(){var e=this;m.$on("actualizarUsuario",function(){e.obtenerUsuario()})},obtenerUsuario:function(){var e=this;return v()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f()({method:"get",url:"/usuario_actual"}).then(function(t){e.usuario_actual=t.data.usuario_actual}).catch(function(){}));case 1:case"end":return t.stop()}},t,e)}))()},logout:function(){var e=this;return f()({method:"get",url:"/logout"}).then(function(){m.$emit("actualizarUsuario"),e.$router.push({name:"Inicio"})}).catch(function(){})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("router-link",{staticClass:"side_bar_link",attrs:{to:{name:"Inicio"}}},[a("v-list-item",[a("v-list-item-action",[a("v-icon",[e._v("home")])],1),e._v(" "),a("v-list-item-content",[e._v("Inicio")])],1)],1),e._v(" "),a("router-link",{staticClass:"side_bar_link",attrs:{to:{name:"Contacto"}}},[a("v-list-item",[a("v-list-item-action",[a("v-icon",[e._v("contact_mail")])],1),e._v(" "),a("v-list-item-content",[e._v("Contacto")])],1)],1)],1)],1),e._v(" "),a("v-app-bar",{attrs:{color:"indigo",dark:"",fixed:"",app:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v("Inicio")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[e.usuario_actual?a("v-btn",{attrs:{text:"",to:{name:"AgregarPelicula"}}},[e._v("\n        Agregar Película\n      ")]):e._e(),e._v(" "),e.usuario_actual?a("v-btn",{attrs:{id:"email_usuario",text:""}},[e._v("\n        Hola "+e._s(e.usuario_actual.nombre)+"\n      ")]):e._e(),e._v(" "),e.usuario_actual?e._e():a("v-btn",{attrs:{text:"",to:{name:"Registro"},id:"boton_registro"}},[e._v("\n        Registro\n      ")]),e._v(" "),e.usuario_actual?e._e():a("v-btn",{attrs:{id:"boton_login",text:"",to:{name:"Login"}}},[e._v("\n        Login\n      ")]),e._v(" "),e.usuario_actual?a("v-btn",{attrs:{text:"",id:"boton_logout"},on:{click:e.logout}},[e._v("\n        Salir (Cerrar sesión)\n      ")]):e._e()],1)],1),e._v(" "),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("div",{attrs:{id:"app"}},[a("router-view")],1)])],1),e._v(" "),a("v-footer",{attrs:{color:"indigo",app:""}},[a("span",{staticClass:"white--text"},[e._v("FullStack1 © 2022")])])],1)},staticRenderFns:[]},b=a("VU/8")(h,_,!1,null,null,null).exports,g=a("/ocq"),x={name:"Peliculas",computed:{peliculas:function(){return this.$store.getters.obtenerPeliculas}},mounted:function(){this.$store.dispatch(obtenerPeliculas())},methods:{obtenerPeliculas:function(){var e=this;return v()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f()({method:"get",url:"/peliculas"}).then(function(t){e.peliculas=t.data.peliculas,e.usuario_actual=t.data.usuario_actual}).catch(function(){}));case 1:case"end":return t.stop()}},t,e)}))()}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.peliculas,function(t){return a("v-flex",{key:t._id,attrs:{xs4:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[a("v-btn",{attrs:{text:"",to:"/peliculas/"+t._id}},[e._v("\n              "+e._s(t.nombre)+"\n            ")])],1),e._v(" "),a("span",{staticClass:"grey--text"},[e._v(e._s(t.anho_pub)+" · "+e._s(t.genero))])])]),e._v(" "),a("v-card-text",[e._v("\n        "+e._s(t.descripcion)+"\n      ")])],1)],1)}),1)},staticRenderFns:[]},k=a("VU/8")(x,w,!1,null,null,null).exports,E={render:function(){var e=this.$createElement;return(this._self._c||e)("v-layout",[this._v("\n  Esto es Contacto\n")])},staticRenderFns:[]},$=a("VU/8")(null,E,!1,null,null,null).exports,C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.validado,callback:function(t){e.validado=t},expression:"validado"}},[a("v-text-field",{attrs:{label:"Nombre:",rules:e.reglasNombre,required:""},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}}),e._v(" "),a("v-text-field",{attrs:{label:"Descripción:","multi-line":"",required:"",rules:e.reglasDescripcion},model:{value:e.descripcion,callback:function(t){e.descripcion=t},expression:"descripcion"}}),e._v(" "),a("v-select",{attrs:{label:"Año de publicación:",items:e.anhos,required:"",rules:e.reglasAnhoPub},model:{value:e.anho_pub,callback:function(t){e.anho_pub=t},expression:"anho_pub"}}),e._v(" "),a("v-text-field",{attrs:{label:"Género:",required:"",rules:e.reglasGenero},model:{value:e.genero,callback:function(t){e.genero=t},expression:"genero"}}),e._v(" "),a("v-btn",{attrs:{disabled:!e.validado},on:{click:e.enviar}},[e._v("\n    Enviar\n  ")]),e._v(" "),a("v-btn",{on:{click:e.limpiar}},[e._v("Limpiar")])],1)},staticRenderFns:[]},P=a("VU/8")({data:function(){return{validado:!0,nombre:"",reglasNombre:[function(e){return!!e||"Se requiere el nombre de la película"}],descripcion:"",reglasDescripcion:[function(e){return!!e||"Se requiere la descripción de la película"}],genero:"",reglasGenero:[function(e){return!!e||"Se requiere el género de la película"},function(e){return e&&e.length<=80||"El género debe de ser menor o igual a 80 caracteres"}],anho_pub:"",reglasAnhoPub:[function(e){return!!e||"Se requiere establecer el año de publicación de la película"}],select:null,anhos:["2022","2021","2020","2019","2018","2017","2016","2015","2014","2013","2012","2011","2010"]}},methods:{enviar:function(){if(this.$refs.form.validate()){var e={nombre:this.nombre,descripcion:this.descripcion,anho_pub:this.anho_pub,genero:this.genero};this.$store.dispatch("agregarPelicula",e),this.$refs.form.reset(),this.$router.push({name:"Inicio"})}return!0},limpiar:function(){this.$refs.form.reset()}}},C,!1,null,null,null).exports,y=a("IE+l"),L=a.n(y),S=document.createElement("div"),U={nota:0},q=(new(r.default.extend({data:function(){return{calif:0}},watch:{calif:function(e){U.nota=e}},template:'\n    <div class="rating">\n      ¿Qué le pareció esta película?\n      <star-rating v-model="calif" :show-rating="false"></star-rating>\n    </div>',components:{"star-rating":L.a}}))).$mount(S),A={name:"Pelicula",data:function(){return{pelicula:[]}},mounted:function(){this.obtenerPelicula()},methods:{calificar:function(){var e=this;return v()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$swal({content:q.$el,buttons:{confirm:{value:0}}}).then(function(){var t=e.$route.params.id;return f()({method:"post",data:{calificacion:U.nota},url:"http://localhost:8081/peliculas/calificar/"+t,headers:{"Content-Type":"application/json"}}).then(function(){e.$swal("¡Gracias por calificar! "+U.nota,"success")}).catch(function(t){var a=t.response.data.message;e.$swal("¡Error!",""+a,"error")})});case 1:case"end":return t.stop()}},t,e)}))()},obtenerPelicula:function(){var e=this;return v()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f()({method:"get",url:"/peliculas/"+e.$route.params.id}).then(function(t){e.pelicula=t.data}).catch(function(){}));case 1:case"end":return t.stop()}},t,e)}))()}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[e._v(e._s(e.pelicula.nombre))]),e._v(" "),a("span",{staticClass:"grey--text"},[e._v(e._s(e.pelicula.anho_pub)+" · "+e._s(e.pelicula.genero))])])]),e._v(" "),a("v-btn",{staticClass:"card-title",on:{click:e.calificar}},[e._v("\n        Calificar "+e._s(e.pelicula.nombre)+"\n      ")]),e._v(" "),a("v-card-text",[e._v("\n        "+e._s(e.pelicula.descripcion)+"\n      ")])],1)],1)],1)},staticRenderFns:[]},N=a("VU/8")(A,I,!1,null,null,null).exports,R={data:function(){return{valido:!0,nombre:"",email:"",contrasenha:"",confirmar_contrasenha:"",reglasEmail:[function(e){return!!e||"Se requiere el email"},function(e){return/\S+@\S+\.\S+/.test(e)||"El email debe de ser válido"}]}},methods:{registrar:function(){var e=this;return v()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.formulario.validate()){t.next=2;break}return t.abrupt("return",f()({method:"post",data:{nombre:e.nombre,email:e.email,contrasenha:e.contrasenha},url:"/usuarios/registro",headers:{"Content-Type":"application/json"}}).then(function(){e.$swal("¡Felicidades!","¡Usted ha sido satisfactoriamente registrado!","success"),e.$router.push({name:"Login"})}).catch(function(t){var a=t.response.data.mensaje;e.$swal("¡Error!",""+a,"error")}));case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}},t,e)}))()},limpiar:function(){this.$refs.formulario.reset()}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valido,callback:function(t){e.valido=t},expression:"valido"}},[a("v-text-field",{attrs:{label:"Nombre:",required:""},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}}),e._v(" "),a("v-text-field",{attrs:{label:"Email:",rules:e.reglasEmail,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("v-text-field",{attrs:{label:"Contraseña:",required:"",type:"password"},model:{value:e.contrasenha,callback:function(t){e.contrasenha=t},expression:"contrasenha"}}),e._v(" "),a("v-text-field",{attrs:{label:"Confirmar contraseña:",type:"password"},model:{value:e.confirmar_contrasenha,callback:function(t){e.confirmar_contrasenha=t},expression:"confirmar_contrasenha"}}),e._v(" "),a("v-btn",{attrs:{disabled:!e.valido},on:{click:e.registrar}},[e._v("Registrar")]),e._v(" "),a("v-btn",{on:{click:e.limpiar}},[e._v("Limpiar")])],1)},staticRenderFns:[]},F=a("VU/8")(R,G,!1,null,null,null).exports,O={data:function(){return{valido:!0,email:"",contrasenha:"",reglasEmail:[function(e){return!!e||"¡Email requerido!"},function(e){return/\S+@\S+\.\S+/.test(e)||"¡Email inválido!"}]}},methods:{acceder:function(){var e=this;return v()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f()({method:"post",data:{email:e.email,contrasenha:e.contrasenha},url:"/usuarios/login",headers:{"Content-Type":"application/json"}}).then(function(t){window.localStorage.setItem("auth",t.data.token),e.$swal("¡Felicidades!","¡Usted está listo para iniciar con todo!","success"),m.$emit("actualizarUsuario"),e.$router.push({name:"Inicio"})}).catch(function(t){var a=t.response.data.mensaje;e.$swal("¡Error!",""+a,"error"),e.$router.push({name:"Login"})}));case 1:case"end":return t.stop()}},t,e)}))()},limpiar:function(){this.$refs.formulario.reset()}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("v-form",{ref:"formulario",attrs:{"lazy-validation":""},model:{value:e.valido,callback:function(t){e.valido=t},expression:"valido"}},[a("v-text-field",{attrs:{label:"Email:",rules:e.reglasEmail,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("v-text-field",{attrs:{label:"Contraseña:",type:"password",required:""},model:{value:e.contrasenha,callback:function(t){e.contrasenha=t},expression:"contrasenha"}}),e._v(" "),a("v-btn",{attrs:{disabled:!e.valido},on:{click:e.acceder}},[e._v("Acceder")]),e._v(" "),a("v-btn",{on:{click:e.limpiar}},[e._v("Limpiar")])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login"},[t("a",{staticClass:"btn facebook",attrs:{href:"/login/facebook"}},[this._v(" LOGIN CON FACEBOOK ")]),this._v(" "),t("a",{staticClass:"btn google",attrs:{href:"/login/google"}},[this._v(" LOGIN CON GOOGLE ")]),this._v(" "),t("a",{staticClass:"btn linkedin",attrs:{href:"/login/linkedin"}},[this._v(" LOGIN CON LINKEDIN ")])])}]},j=a("VU/8")(O,V,!1,null,null,null).exports;r.default.use(g.a);var z=new g.a({mode:"history",routes:[{path:"/",name:"Inicio",component:k},{path:"/contacto",name:"Contacto",component:$},{path:"/peliculas/agregar",name:"AgregarPelicula",component:P},{path:"/peliculas/:id",name:"Pelicula",component:N},{path:"/usuarios/registro",name:"Registro",component:F},{path:"/usuarios/login",name:"Login",component:j}]}),T=a("NYxO"),D=this;r.default.use(T.a);var M=new T.a.Store({state:{peliculas:[]},getters:{obtenerPeliculas:function(e){return e.peliculas}},mutations:{PELICULAS:function(e,t){e.peliculas=t},AGREGAR_PELICULA:function(e,t){e.peliculas.unshift(t)}},actions:{agregarPeliculas:function(e,t){return f()({method:"post",data:t,url:"/peliculas",headers:{"Content-Type":"application/json"}}).then(function(t){e.commit("AGREGAR_PELICULA",t.data),D.$swal("¡Felicidades!","Pelicula agregada satisfactoriamente","success")}).catch(function(){D.$swal("Error","No se pudo agregar la pelicula","error")})},obtenerPeliculas:function(e,t){f()({method:"get",url:"/peliculas"}).then(function(t){e.commit("PELICULAS",t.data.peliculas)}).catch(function(){})}}});r.default.use(n.a),r.default.use(o.a),r.default.use(l.a),r.default.config.productionTip=!1,new r.default({vuetify:new o.a,el:"#app",store:M,router:z,components:{App:b},template:"<App/>"})},SyL9:function(e,t){},qb6w:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.03f6581882c19302bbf5.js.map